<%- include('partials/header') -%>
<div class="container">
  <div class="row mt-5">
    <div class="col-12">
      <div>
        <p><strong>User Name</strong>: <%= user.userName %></p>
        <p><strong>Email</strong>: <%= user.email %></p>
        <a href="/logout" class="col-3 btn btn-primary">Logout</a>
      </div>
      <div class="mt-5">
        <table id="table" class="table table-striped table-dark">
          <thead>
            <tr>
              <th scope="col">Player #</th>
              <th scope="col">First Name</th>
              <th scope="col">Last Name</th>
              <th scope="col">Rebound</th>
              <th scope="col">Points</th>
              <th scope="col">Steals</th>
              <th scope="col">Assist</th>
            </tr>
          </thead>
          <tbody>
            <% if(players.length > 0){ %> <% for(let player of player) { %>

            <tr>
              <th scope="row"><%= player.playerNumber %></th>
              <td><% player.firstName %></td>
              <td><% player.lastName %></td>
              <td>
                <form
                  class="col-1"
                  action="/stat/addPoint/<%= player.id %>?_method=PUT"
                  method="POST"
                >
                  <button type="button" class="btn btn-secondary" type="submit">
                    -
                  </button>
                </form>
                <%= stat.addPoint %><button
                  type="button"
                  class="btn btn-secondary"
                >
                  +
                </button>
              </td>
              <td>
                <button type="button" class="btn btn-secondary">-</button
                >rebounds<button type="button" class="btn btn-secondary">
                  +
                </button>
              </td>
              <td>
                <button type="button" class="btn btn-secondary">-</button
                >assists<button type="button" class="btn btn-secondary">
                  +
                </button>
              </td>
              <td>
                <button type="button" class="btn btn-secondary">-</button
                >steals<button type="button" class="btn btn-secondary">
                  +
                </button>
              </td>
            </tr>
            <% } %>
            <tr>
              <a
                href="/updatePlayer/<%= player._id %>"
                class="btn btn-sm btn-warning"
                ><i class="fa fa-edit"></i
              ></a>
              <a
                href="/deletePlayer/<%= player._id %>"
                class="btn btn-sm btn-danger"
                ><i class="fa fa-trash"></i
              ></a>
            </tr>

            <% } %> <% } else { %>
            <tr>
              <td>No data found</td>
            </tr>
            <% } %>
          </tbody>
        </table>

        <!-- <script>
          function updateData() {
            let array = [];
            let table = document.getElementById("table");
            let rowlength = table.rows.length;
            for (i = 0; i < rowlength; i++) {
              let cells = table.rows.item(i).cells;
              let currentPlayer = {
                playerNumber: cells.item(0).innerHTML,
                firstName: cells.item(1).innerHTML,
                lastName: cells.item(2).innerHTML,
              };
              array.push(currentPlayer);
            }
            async function addtoDb() {
              try {
                const response = await fetch("/profile", {
                  method: "POST",
                  body: { data: array, userId: "<%= user.userName %>" },
                });
                const data = await response.json();
                console.log(data);
                location.reload();
              } catch (err) {
                console.log(err);
              }
            }
          }
        </script> -->

        <%- include('partials/footer') -%>
      </div>
    </div>
  </div>
</div>
